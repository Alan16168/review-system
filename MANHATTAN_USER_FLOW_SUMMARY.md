# 🎯 曼哈顿计划用户体验流程图汇总

**快速参考：客户购买后如何便捷使用**

---

## 📊 核心流程总览

```
用户购买产品
    ↓
立即显示使用入口
    ↓
三种产品路径：
    ├─ 📋 付费模板 → 立即创建复盘 / 保存到模板库
    ├─ ✨ AI写作助手 → 在任何输入框使用
    └─ 🎥 AI视频生成 → 复盘完成后一键生成
```

---

## 🎨 产品一：付费模板使用流程

### **用户旅程**
```
购买成功页面
    ↓
显示两个选项：
    ├─ [🚀 立即使用模板]
    │      ↓
    │  跳转创建复盘页面
    │      ↓
    │  模板已自动选中
    │      ↓
    │  点击"使用此模板创建"
    │      ↓
    │  自动创建新复盘（问题已填充）
    │      ↓
    │  用户开始填写答案
    │
    └─ [📚 查看我的模板库]
           ↓
       模板已保存到库中
           ↓
       随时可以调用创建新复盘
```

### **关键设计点**
- ✅ **零等待**：购买完成 = 功能立即可用
- ✅ **双选择**：立即使用 或 稍后使用
- ✅ **自动化**：无需手动选择模板，已自动选中
- ✅ **永久保存**：模板永久保存在"我的模板库"

### **UI 关键界面**
1. **购买成功页** - 显示使用引导
2. **创建复盘页** - 模板已自动选中
3. **我的模板库** - 所有已购模板

---

## ✨ 产品二：AI写作助手使用流程

### **用户旅程**
```
用户场景：正在填写复盘问题
    ↓
在问题输入框中简单输入
    ↓
点击 [✨ AI帮我扩写] 按钮
    ↓
显示加载动画（2-5秒）
    ↓
AI生成内容显示在预览区
    ↓
用户选择：
    ├─ [✅ 采用此版本] → 替换原文本
    ├─ [🔄 重新生成] → 再次调用AI
    ├─ [✏️ 编辑后采用] → 修改后使用
    └─ [❌ 取消] → 保持原文本
```

### **权限检查逻辑**
```
检查用户权限
    ↓
Premium/Team/Enterprise用户
    ├─ ✅ 无限使用
    └─ 显示：💡 Premium用户无限使用
    
免费用户
    ├─ 检查信用点余额
    │   ├─ 余额 ≥ 10 credits
    │   │   ├─ ✅ 允许使用
    │   │   └─ 显示：💰 本次消耗10 credits，余额XXX
    │   └─ 余额 < 10 credits
    │       ├─ ❌ 禁止使用
    │       └─ 弹窗：⚠️ 余额不足，[立即充值]
```

### **关键设计点**
- ✅ **无缝集成**：在任何输入框都能使用
- ✅ **即时反馈**：2-5秒内显示结果
- ✅ **灵活选择**：4种操作选项
- ✅ **透明消费**：明确显示消耗credits
- ✅ **智能提醒**：余额不足主动提示充值

### **UI 关键界面**
1. **输入框下方** - AI助手按钮组
2. **生成预览区** - AI结果展示
3. **顶部通知栏** - 信用点余额显示
4. **余额不足弹窗** - 快速充值入口

---

## 🎥 产品三：AI视频生成使用流程

### **用户旅程**
```
用户完成复盘填写
    ↓
在复盘详情页，点击 [🎬 生成培训视频]
    ↓
进入视频生成向导
    ↓
步骤1：选择视频风格
    ├─ 💼 商务专业风格
    ├─ 🎓 教育讲解风格
    └─ 🎨 创意动画风格
    ↓
步骤2：选择配音语言
    ├─ 中文（普通话）
    ├─ 英文
    └─ 日文
    ↓
步骤3：选择视频时长
    ├─ 简版（3-5分钟）
    └─ 完整版（8-12分钟）
    ↓
预览配置 & 确认生成
    ↓
点击 [🚀 开始生成]
    ↓
显示生成进度（5-10分钟）
    ├─ ✅ 分析文本内容
    ├─ ✅ 生成视频脚本
    ├─ ⏳ 合成视频画面（进行中...）
    ├─ ⏸️ 添加AI配音（等待中）
    ├─ ⏸️ 添加字幕（等待中）
    └─ ⏸️ 最终渲染（等待中）
    ↓
生成完成通知
    ├─ 📧 邮件通知
    └─ 🔔 站内通知
    ↓
视频预览 & 下载
    ├─ [⬇️ 下载视频]
    ├─ [🔗 获取分享链接]
    ├─ [✏️ 重新生成]
    └─ [📧 发送到邮箱]
```

### **异步任务处理**
```
前端：提交生成请求
    ↓
后端：创建任务 → 加入队列 → 预扣费用
    ↓
返回前端：task_id + 预计时间
    ↓
前端：显示进度页面（可最小化）
    ↓
后台队列：处理视频生成
    ├─ 分析文本 (10%)
    ├─ 生成脚本 (30%)
    ├─ 渲染视频 (50%)
    ├─ 添加配音 (80%)
    └─ 最终输出 (100%)
    ↓
完成后：发送通知
    ├─ 更新任务状态
    ├─ 保存视频URL
    └─ 通知用户
    ↓
用户：查看并下载视频
```

### **关键设计点**
- ✅ **向导式流程**：3步配置，简单明了
- ✅ **异步处理**：不阻塞用户，可后台运行
- ✅ **进度可视化**：实时显示6个生成步骤
- ✅ **多渠道通知**：邮件 + 站内 + 推送
- ✅ **灵活操作**：预览、下载、分享、重新生成

### **UI 关键界面**
1. **视频生成向导** - 3步配置流程
2. **生成进度页** - 实时进度显示
3. **视频完成页** - 预览和操作
4. **通知中心** - 生成完成提醒

---

## 💳 信用点系统用户体验

### **全局余额显示**
```
┌─────────────────────────────────────┐
│ Review System                        │
│ ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━  │
│ [复盘] [Marketplace] [我的模板]      │
│                                      │
│                   💰 850 Credits    │
│                   [+充值] [👤 Alan] │
└─────────────────────────────────────┘
     ↑
   始终可见
```

### **余额不足提醒流程**
```
用户尝试使用AI功能
    ↓
系统检查余额
    ↓
余额不足（< 所需credits）
    ↓
弹出提醒对话框：
    ┌───────────────────────┐
    │ ⚠️ 信用点余额不足      │
    │                       │
    │ 当前: 5 credits       │
    │ 需要: 10 credits      │
    │ 差额: 5 credits       │
    │                       │
    │ 快速充值：             │
    │ [ ] Starter - 100     │
    │ [✓] Popular - 600 ⭐  │
    │                       │
    │ [💳 立即充值] [取消]  │
    └───────────────────────┘
    ↓
用户选择充值套餐
    ↓
跳转PayPal支付页面
    ↓
支付完成
    ↓
Credits立即到账
    ↓
自动返回原页面继续操作
```

### **充值套餐选择**
```
┌──────────┐ ┌──────────┐ ┌──────────┐
│ Starter  │ │ Popular  │ │ Pro Pack │
│ 100      │ │ 600 ⭐   │ │ 2600 ⭐  │
│ Credits  │ │ Credits  │ │ Credits  │
│          │ │ 送20%    │ │ 送30%    │
│ $9.99    │ │ $39.99   │ │ $149.99  │
│ [购买]   │ │ [购买]   │ │ [购买]   │
└──────────┘ └──────────┘ └──────────┘
```

### **使用统计可视化**
```
本月使用情况：
┌─────────────────────────────┐
│ AI写作: 340 credits (52%)   │
│ ████████████░░░░░░░░░░░    │
│                             │
│ AI视频: 300 credits (46%)   │
│ ███████████░░░░░░░░░░░░    │
│                             │
│ 模板购买: 10 credits (2%)   │
│ █░░░░░░░░░░░░░░░░░░░░░░    │
└─────────────────────────────┘
```

### **智能推荐**
```
💡 根据您的使用习惯分析：

您本月消耗了650 credits
主要用于：
• AI写作：34次（340 credits）
• AI视频：1次（300 credits）

推荐方案：
订阅Premium套餐（$19.99/月）可以：
✅ AI写作无限次使用
✅ 每月50个AI视频
✅ 节省约 $35/月（54%）

[查看订阅套餐]
```

---

## 🎓 首次购买后引导流程

### **引导触发时机**
```
触发条件：
├─ 首次购买任何产品
├─ 订阅升级到新tier
└─ 用户主动点击"帮助中心"
```

### **4步引导流程**
```
步骤0：欢迎弹窗
┌────────────────────────────┐
│ 🎉 欢迎成为Premium会员！    │
│                            │
│ 让我们花30秒时间，          │
│ 快速了解如何使用新功能      │
│                            │
│ [开始引导] [稍后再说]       │
└────────────────────────────┘
    ↓
步骤1：高亮"我的模板"
    "这里是您已购买的所有模板"
    ↓
步骤2：高亮"AI助手按钮"
    "在任何输入框中使用AI写作助手"
    ↓
步骤3：高亮"视频生成按钮"
    "完成复盘后一键生成培训视频"
    ↓
步骤4：高亮"信用点余额"
    "这里显示您的余额和使用情况"
    ↓
完成引导
┌────────────────────────────┐
│ ✅ 准备就绪！               │
│                            │
│ 开始创建您的第一个复盘吧    │
│                            │
│ [立即开始]                  │
└────────────────────────────┘
```

### **引导特点**
- ⏱️ **快速**：总共30秒
- 🎯 **聚焦**：只介绍核心功能
- 🔄 **可重复**：随时可以再次查看
- ⏭️ **可跳过**：不强制完成

---

## 🔔 通知系统设计

### **5类通知**

#### **1. 购买成功通知**
```
📧 邮件 + 🔔 站内消息

标题：购买成功 - 产品经理年度复盘53问
内容：
  ✅ 您已成功购买"产品经理年度复盘53问"模板
  💰 支付金额：$19.99
  📋 使用方法：
      1. 进入"我的模板"
      2. 选择此模板创建新复盘
  [立即使用] [查看购买详情]
```

#### **2. 视频生成完成通知**
```
📧 邮件 + 🔔 站内消息 + 📱 推送

标题：视频生成完成！
内容：
  ✅ "2025年度产品经理复盘"培训视频已生成
  ⏱️ 视频时长：8分32秒
  📊 文件大小：42.5 MB
  [查看视频] [下载视频]
```

#### **3. 余额不足提醒**
```
🔔 站内消息（顶部通知栏）

⚠️ 提醒：您的信用点余额不足20%（仅剩150）
为避免影响使用，建议尽快充值
[充值] [关闭]
```

#### **4. 订阅到期提醒**
```
📧 邮件（提前7天、3天、1天）

标题：您的Premium订阅即将到期
内容：
  您的Premium订阅将于3天后（2025-11-22）到期
  
  订阅到期后，您将失去：
  • AI写作无限次使用
  • 每月50个AI视频
  • 所有付费模板访问权限
  
  [立即续费] [更改订阅计划]
```

#### **5. 每月账单通知**
```
📧 邮件（每月1号）

标题：您的11月使用报告
内容：
  📊 本月使用统计：
  • AI写作：120次
  • AI视频：3个
  • 模板使用：15次
  
  💰 费用明细：
  • Premium订阅：$19.99
  • 信用点购买：$39.99
  • 总计：$59.98
  
  [查看详细账单] [下载PDF]
```

---

## 📱 移动端适配

### **移动端关键调整**

#### **1. 购买成功页（竖屏优化）**
```
┌────────────────┐
│ ✅ 购买成功！   │
│ ━━━━━━━━━━━━ │
│                │
│ 📋 产品经理年度 │
│    复盘53问    │
│ 💰 $19.99      │
│                │
│ ┌────────────┐│
│ │🎉 模板已添加││
│ │  到您的库中 ││
│ └────────────┘│
│                │
│ [🚀 立即使用]  │
│ [📚 我的模板库]│
│                │
│ [< 返回]       │
└────────────────┘
```

#### **2. AI写作（触摸优化）**
```
┌────────────────┐
│ 问题1: 挑战？   │
│ ━━━━━━━━━━━━ │
│                │
│ ┌────────────┐│
│ │产品需求太多 ││
│ │优先级难决策 ││
│ └────────────┘│
│                │
│ [✨ AI扩写]    │
│ [📝 AI润色]    │
│                │
│ 💰 10 credits  │
│ 余额: 850      │
│                │
│ [保存][下一题→]│
└────────────────┘
```

#### **3. 信用点管理（手指友好）**
```
┌────────────────┐
│ 💰 信用点管理   │
│ ━━━━━━━━━━━━ │
│                │
│ 当前余额        │
│ 850 Credits    │
│ ████████░░ 60% │
│                │
│ 本月已用：650   │
│                │
│ [💳 充值]      │
│                │
│ 充值套餐        │
│ ┌────────────┐│
│ │ Popular ⭐ ││
│ │ 600 Credits││
│ │ $39.99     ││
│ │ [购买]     ││
│ └────────────┘│
└────────────────┘
```

---

## ⚡ 性能优化

### **关键优化点**

1. **余额查询缓存**
   ```typescript
   // 缓存5秒，避免频繁查询
   const balance = await cache.get('credits_balance_' + userId);
   ```

2. **AI响应预加载**
   ```typescript
   // 用户开始输入时预热连接
   onInput(() => warmupAIConnection());
   ```

3. **视频生成异步**
   ```typescript
   // 使用Cloudflare Queues后台处理
   await VIDEO_QUEUE.send(task);
   ```

4. **通知批量发送**
   ```typescript
   // 每5分钟批量发送邮件通知
   await NOTIFICATION_QUEUE.sendBatch(notifications);
   ```

---

## 🎯 用户体验核心总结

### ✅ **5个"立即"原则**

1. **立即可用**
   - 购买完成 = 功能解锁
   - 无需等待、配置、审核

2. **立即反馈**
   - 每个操作都有明确反馈
   - 加载动画 + 进度显示

3. **立即引导**
   - 首次购买触发30秒引导
   - 清晰的使用路径

4. **立即提醒**
   - 余额不足主动提醒
   - 订阅到期提前7天通知

5. **立即充值**
   - 一键快速充值
   - 支付完成Credits立即到账

---

### 📊 **3个"清晰"原则**

1. **余额清晰**
   - 顶部全局显示
   - 使用前明确告知消耗

2. **进度清晰**
   - 视频生成实时进度
   - 订阅状态清晰展示

3. **费用清晰**
   - 详细使用历史
   - 每月账单报告

---

### 🚀 **2个"便捷"原则**

1. **操作便捷**
   - 最多3步完成任务
   - 智能默认选项

2. **查找便捷**
   - 清晰的导航结构
   - 搜索和筛选功能

---

## 📞 相关文档

- **主文档**: `MANHATTAN_PROJECT.md` - 完整战略计划
- **本文档**: `MANHATTAN_USER_EXPERIENCE.md` - 详细设计方案
- **快速参考**: `MANHATTAN_PROJECT_QUICK_REF.md` - 一页总结

---

**文档版本**: v1.0  
**创建时间**: 2025-11-19  
**最后更新**: 2025-11-19  
**负责人**: Alan
